[gd_scene load_steps=32 format=3 uid="uid://b6a77ow3dkibo"]

[ext_resource type="Script" path="res://res/scripts/controllers/platforming/TestLevel.cs" id="1_cx5s2"]
[ext_resource type="Texture2D" uid="uid://dyowibwg6t7w" path="res://assets/models/Purgatory_Level_Design_Blueprint.png" id="2_xfqal"]
[ext_resource type="PackedScene" uid="uid://do36152v62xpk" path="res://res/scenes/levels/overworld/environment/Door.tscn" id="3_4jhnf"]
[ext_resource type="PackedScene" uid="uid://cutwu3nhtg776" path="res://res/scenes/levels/overworld/enemys/enemy_hand.tscn" id="4_h554j"]
[ext_resource type="Texture2D" uid="uid://d3803a136grhv" path="res://assets/models/combat_environment.png" id="5_hau81"]
[ext_resource type="Script" path="res://res/scripts/controllers/Shop.cs" id="6_kwr13"]
[ext_resource type="Texture2D" uid="uid://bqtgngcws2xth" path="res://assets/models/black_background_square.png" id="7_q51df"]
[ext_resource type="PackedScene" uid="uid://cshcvcas2jerk" path="res://res/scenes/characters/player/player.tscn" id="8_27ny3"]
[ext_resource type="PackedScene" uid="uid://diuh8d07tu460" path="res://res/scenes/platformer_camera/platformer_camera.tscn" id="9_meyk3"]

[sub_resource type="SegmentShape2D" id="SegmentShape2D_hm3xe"]
a = Vector2(-43, 8)
b = Vector2(2633, 8)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_6fwiq"]
a = Vector2(21, -214)
b = Vector2(21, 14)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_vqlio"]
a = Vector2(-48, -3)
b = Vector2(2157, -3)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_q7lqy"]
a = Vector2(-8, -330)
b = Vector2(-9, 43)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_wq0sw"]
a = Vector2(-10, 7)
b = Vector2(1113, 7)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_hp5lj"]
a = Vector2(-56, -2)
b = Vector2(761, -2)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kcckp"]
size = Vector2(26, 673)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_p38fp"]
size = Vector2(56, 556)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_sl5og"]
size = Vector2(1486, 51)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_y0pim"]
size = Vector2(26, 203)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g4dhh"]
size = Vector2(361, 26)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gnotd"]
size = Vector2(83, 28)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_omo8s"]
size = Vector2(56, 28)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5dnum"]
size = Vector2(55, 27)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dnocb"]
size = Vector2(56, 28)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6lkle"]
size = Vector2(55, 27.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_h05vj"]
size = Vector2(55, 28)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_52nkj"]
size = Vector2(1152, 52)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_a7al6"]
size = Vector2(1150, 210.5)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ais8d"]
vertices = PackedVector2Array(4162, -3717, 4145, 20, -2856, -22, -2754, -3717)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-2754, -3717, -2856, -22, 4145, 20, 4162, -3717)])

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cxs41"]
size = Vector2(107, 140.5)

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_0ra81"]
texture = ExtResource("7_q51df")
region_rect = Rect2(20, 20, 200, 200)
modulate_color = Color(0, 0, 0, 1)

[node name="Purgatory" type="Node2D"]
script = ExtResource("1_cx5s2")
_combatScene = "uid://bk6mw4uwgd1yl"

[node name="Sprite2D" type="Sprite2D" parent="."]
z_index = -1
position = Vector2(506, -993)
scale = Vector2(1.5, 1.5)
texture = ExtResource("2_xfqal")

[node name="Walls" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Walls"]
position = Vector2(-1532, -563)
shape = SubResource("SegmentShape2D_hm3xe")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Walls"]
position = Vector2(-1596, -567)
shape = SubResource("SegmentShape2D_6fwiq")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Walls"]
position = Vector2(-1528, -778)
shape = SubResource("SegmentShape2D_vqlio")

[node name="CollisionShape2D9" type="CollisionShape2D" parent="Walls"]
position = Vector2(2616, -1152)
shape = SubResource("SegmentShape2D_q7lqy")

[node name="CollisionShape2D10" type="CollisionShape2D" parent="Walls"]
position = Vector2(660, -1317)
shape = SubResource("SegmentShape2D_wq0sw")

[node name="CollisionShape2D14" type="CollisionShape2D" parent="Walls"]
position = Vector2(1850, -1475)
shape = SubResource("SegmentShape2D_hp5lj")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Walls"]
position = Vector2(641, -976.5)
shape = SubResource("RectangleShape2D_kcckp")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="Walls"]
position = Vector2(1128, -833)
shape = SubResource("RectangleShape2D_p38fp")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="Walls"]
position = Vector2(1893, -1085.5)
shape = SubResource("RectangleShape2D_sl5og")

[node name="CollisionShape2D7" type="CollisionShape2D" parent="Walls"]
position = Vector2(1783, -1383.5)
shape = SubResource("RectangleShape2D_y0pim")

[node name="CollisionShape2D8" type="CollisionShape2D" parent="Walls"]
position = Vector2(167.5, -1099)
shape = SubResource("RectangleShape2D_g4dhh")

[node name="Platforms" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platforms"]
position = Vector2(863.5, -625)
shape = SubResource("RectangleShape2D_gnotd")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Platforms"]
position = Vector2(1017, -708)
shape = SubResource("RectangleShape2D_omo8s")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Platforms"]
position = Vector2(877.5, -794.5)
shape = SubResource("RectangleShape2D_5dnum")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Platforms"]
position = Vector2(738, -875)
shape = SubResource("RectangleShape2D_dnocb")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="Platforms"]
position = Vector2(877.5, -986.75)
shape = SubResource("RectangleShape2D_6lkle")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="Platforms"]
position = Vector2(1016.5, -1069)
shape = SubResource("RectangleShape2D_h05vj")

[node name="Locations" type="Node" parent="."]

[node name="Room_1" type="Marker2D" parent="Locations"]
position = Vector2(-18, -2681)

[node name="Room_2" type="Marker2D" parent="Locations"]
position = Vector2(42, -1195)

[node name="Doors" type="Node" parent="."]

[node name="ShopKeeperDoor" parent="Doors" instance=ExtResource("3_4jhnf")]
position = Vector2(-542, -600)
scale = Vector2(0.0516886, 0.13859)

[node name="ReceptionistDoor" parent="Doors" instance=ExtResource("3_4jhnf")]
position = Vector2(12, -600)
scale = Vector2(0.0516886, 0.13859)

[node name="EnemyStage" type="StaticBody2D" parent="."]

[node name="Sprite2D" type="Sprite2D" parent="EnemyStage"]
position = Vector2(182, -2442)
scale = Vector2(1, 0.0799951)

[node name="CollisionShape2D" type="CollisionShape2D" parent="EnemyStage"]
position = Vector2(182, -2442)
shape = SubResource("RectangleShape2D_52nkj")

[node name="Enemys" type="Node" parent="."]

[node name="enemy" parent="Enemys" instance=ExtResource("4_h554j")]
position = Vector2(-376, -2483)

[node name="Area2D" type="Area2D" parent="Enemys/enemy"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemys/enemy/Area2D"]
position = Vector2(558, -89.75)
shape = SubResource("RectangleShape2D_a7al6")

[node name="GroundPosition" type="Marker2D" parent="Enemys/enemy"]
position = Vector2(-13, 15)

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_ais8d")

[node name="Npcs" type="Node" parent="."]

[node name="TestNPC" type="Node2D" parent="Npcs"]
position = Vector2(177, -1171)

[node name="Sprite2D" type="Sprite2D" parent="Npcs/TestNPC"]
scale = Vector2(0.0555556, 0.180556)

[node name="Area2D" type="Area2D" parent="Npcs/TestNPC"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Npcs/TestNPC/Area2D"]
position = Vector2(0.5, -11.75)
shape = SubResource("RectangleShape2D_cxs41")

[node name="Dialogue" type="NinePatchRect" parent="Npcs/TestNPC"]
offset_left = -101.0
offset_top = -109.0
offset_right = 103.0
offset_bottom = -69.0
texture = ExtResource("5_hau81")
metadata/_edit_use_anchors_ = true

[node name="Name" type="RichTextLabel" parent="Npcs/TestNPC/Dialogue"]
layout_mode = 0
offset_left = 4.0
offset_right = 200.0
offset_bottom = 13.0
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_font_sizes/normal_font_size = 14
text = "Name"
metadata/_edit_use_anchors_ = true

[node name="Text" type="RichTextLabel" parent="Npcs/TestNPC/Dialogue"]
layout_mode = 0
offset_left = 4.0
offset_top = 13.0
offset_right = 200.0
offset_bottom = 37.0
theme_override_colors/default_color = Color(0, 0, 0, 1)
theme_override_font_sizes/normal_font_size = 13
text = "Hello"
metadata/_edit_use_anchors_ = true

[node name="Options" type="Node2D" parent="Npcs/TestNPC/Dialogue"]

[node name="Button_1" type="Button" parent="Npcs/TestNPC/Dialogue/Options"]
offset_top = 40.0
offset_right = 23.0
offset_bottom = 59.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 13
text = "Yes"
flat = true
icon_alignment = 1
expand_icon = true
text_direction = 1
metadata/_edit_use_anchors_ = true

[node name="Sprite2D" type="Sprite2D" parent="Npcs/TestNPC/Dialogue/Options/Button_1"]
z_index = -1
position = Vector2(11.5, 10)
scale = Vector2(0.0199653, 0.0308641)
texture = ExtResource("5_hau81")

[node name="Button_2" type="Button" parent="Npcs/TestNPC/Dialogue/Options"]
offset_left = 23.0
offset_top = 40.0
offset_right = 46.0
offset_bottom = 59.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 13
text = "No"
flat = true
icon_alignment = 1
expand_icon = true
text_direction = 1
metadata/_edit_use_anchors_ = true

[node name="Sprite2D" type="Sprite2D" parent="Npcs/TestNPC/Dialogue/Options/Button_2"]
z_index = -1
position = Vector2(11.5, 10)
scale = Vector2(0.0199653, 0.0308641)
texture = ExtResource("5_hau81")

[node name="Shop" type="Node2D" parent="."]
visible = false
z_index = 2
position = Vector2(-807, -596)
script = ExtResource("6_kwr13")

[node name="TextureRect" type="TextureRect" parent="Shop"]
offset_left = -405.0
offset_top = -237.0
offset_right = 384.0
offset_bottom = 219.0
texture = ExtResource("5_hau81")
expand_mode = 1

[node name="GridContainer" type="GridContainer" parent="Shop"]
anchors_preset = 9
anchor_bottom = 1.0
offset_left = -350.0
offset_top = -125.0
offset_right = 322.0
offset_bottom = 125.0
grow_vertical = 2
theme_override_constants/h_separation = 24
theme_override_constants/v_separation = 0
columns = 4

[node name="Item_1" type="Panel" parent="Shop/GridContainer"]
custom_minimum_size = Vector2(150, 250)
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxTexture_0ra81")

[node name="Item_Name" type="Label" parent="Shop/GridContainer/Item_1"]
layout_mode = 0
offset_top = -41.0
offset_right = 56.0
offset_bottom = -9.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 34
text = "Item 1"

[node name="Button" type="Button" parent="Shop/GridContainer/Item_1"]
layout_mode = 0
offset_right = 150.0
offset_bottom = 250.0
flat = true

[node name="Item_2" type="Panel" parent="Shop/GridContainer"]
custom_minimum_size = Vector2(150, 250)
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxTexture_0ra81")

[node name="Item_Name" type="Label" parent="Shop/GridContainer/Item_2"]
layout_mode = 0
offset_top = -41.0
offset_right = 56.0
offset_bottom = -9.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 34
text = "Item 2"

[node name="Button" type="Button" parent="Shop/GridContainer/Item_2"]
layout_mode = 0
offset_right = 150.0
offset_bottom = 250.0
flat = true

[node name="Item_3" type="Panel" parent="Shop/GridContainer"]
custom_minimum_size = Vector2(150, 250)
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxTexture_0ra81")

[node name="Item_Name" type="Label" parent="Shop/GridContainer/Item_3"]
layout_mode = 0
offset_top = -41.0
offset_right = 56.0
offset_bottom = -9.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 34
text = "Item 3"

[node name="Button" type="Button" parent="Shop/GridContainer/Item_3"]
layout_mode = 0
offset_right = 150.0
offset_bottom = 250.0
flat = true

[node name="Item_4" type="Panel" parent="Shop/GridContainer"]
custom_minimum_size = Vector2(150, 250)
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxTexture_0ra81")

[node name="Item_Name" type="Label" parent="Shop/GridContainer/Item_4"]
layout_mode = 0
offset_top = -41.0
offset_right = 56.0
offset_bottom = -9.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 34
text = "Item 4
"

[node name="Button" type="Button" parent="Shop/GridContainer/Item_4"]
layout_mode = 0
offset_right = 150.0
offset_bottom = 250.0
flat = true

[node name="Title" type="Label" parent="Shop"]
offset_left = -391.0
offset_top = -222.0
offset_right = -335.0
offset_bottom = -190.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 34
text = "Shop"

[node name="Close" type="Button" parent="Shop"]
offset_left = 303.0
offset_top = -222.0
offset_right = 361.0
offset_bottom = -190.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 31
text = "Exit"
flat = true

[node name="Player" parent="." instance=ExtResource("8_27ny3")]
position = Vector2(-681, -632)
_jumpSpeed = 500.0

[node name="platformer_camera" parent="Player" instance=ExtResource("9_meyk3")]

[connection signal="body_entered" from="Enemys/enemy/Area2D" to="Enemys/enemy" method="OnAreaBodyEntered"]
[connection signal="body_exited" from="Enemys/enemy/Area2D" to="Enemys/enemy" method="OnAreaBodyExited"]
[connection signal="body_entered" from="Npcs/TestNPC/Area2D" to="Npcs/TestNPC" method="_on_area_2d_body_entered"]
[connection signal="body_exited" from="Npcs/TestNPC/Area2D" to="Npcs/TestNPC" method="_on_area_2d_body_exited"]
[connection signal="pressed" from="Npcs/TestNPC/Dialogue/Options/Button_1" to="Npcs/TestNPC" method="_on_button_1_pressed"]
[connection signal="pressed" from="Npcs/TestNPC/Dialogue/Options/Button_2" to="Npcs/TestNPC" method="_on_button_2_pressed"]
[connection signal="pressed" from="Shop/GridContainer/Item_1/Button" to="Shop" method="ButtonItem" binds= [1]]
[connection signal="pressed" from="Shop/GridContainer/Item_2/Button" to="Shop" method="ButtonItem" binds= [2]]
[connection signal="pressed" from="Shop/GridContainer/Item_3/Button" to="Shop" method="ButtonItem" binds= [3]]
[connection signal="pressed" from="Shop/GridContainer/Item_4/Button" to="Shop" method="ButtonItem" binds= [4]]
[connection signal="pressed" from="Shop/Close" to="Shop" method="OnClosePressed"]
